"use strict";(self["webpackChunkvuedemo"]=self["webpackChunkvuedemo"]||[]).push([[46],{8821:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"goods-manager"},[e._v(" 商品管理 "),t("table-again",{ref:"tableIns",attrs:{query:e.queryTableData,pageSize:10,selectionChange:e.selectionChange}},[t("el-table-column",{attrs:{label:"商品编号","min-width":"33%",prop:"goodsId"}}),t("el-table-column",{attrs:{label:"商品名",prop:"goodsName"}}),t("el-table-column",{attrs:{label:"商品简介",prop:"goodsIntro"}}),t("el-table-column",{attrs:{label:"商品图片",prop:"goodsCoverImg"}}),t("el-table-column",{attrs:{label:"商品库存",prop:"stockNum"}}),t("el-table-column",{attrs:{label:"商品库存",prop:"stockNum"}}),t("el-table-column",{attrs:{label:"商品售价",prop:"sellingPrice"}}),t("el-table-column",{attrs:{label:"上架状态",prop:"goodsSellStatus"},scopedSlots:e._u([{key:"default",fn:function({row:{goodsSellStatus:a}}){return[t("span",1===+a?{staticStyle:{color:"red"}}:{staticStyle:{color:"green"}},[e._v(e._s(e.formatterStatus(a)))])]}}])}),t("el-table-column",{attrs:{label:"操作",width:"100px"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.toOrderDetail(a.orderId)}}},[e._v("修改")]),t("el-link",{attrs:{type:"success"},on:{click:function(t){return e.toOrderDetail(a.orderId)}}},[e._v("下架")])]}}])})],1)],1)},l=[],o={name:"goods-manager",data(){return{}},methods:{async queryTableData(e,t){let a=[],r=0;try{let{resultCode:l,data:o}=await this.$api.goods.queryGoodsList(e,t);200===+l&&(r=+o.totalCount,a=o.list)}catch(l){console.log(l)}return{list:a,totalCount:r}},selectionChange(){},formatterStatus(e){return 0===+e?"销售中":"已下架"}}},s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"9a5de15a",null),c=n.exports},990:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"member-manager"},[t("div",{staticClass:"handler-box"},[t("el-button",{attrs:{round:!0,type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.triggerUnban}},[e._v(" 解除禁用 ")]),t("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"small",round:!0},on:{click:e.triggerBan},slot:"reference"},[e._v(" 禁用账户 ")])],1),t("table-again",{ref:"tableIns",attrs:{query:e.queryTableData,pageSize:10,selectionChange:e.selectionChange}},[t("el-table-column",{attrs:{label:"昵称","min-width":"33%",prop:"nickName"}}),t("el-table-column",{attrs:{label:"登录名","min-width":"33%",prop:"loginName"}}),t("el-table-column",{staticClass:"table-data",class:{isBaned:e.isBaned},attrs:{label:"身份状态","min-width":"33%",prop:"lockedFlag"},scopedSlots:e._u([{key:"default",fn:function({row:{lockedFlag:a}}){return[1===+a?t("span",{staticStyle:{color:"red"}},[e._v("禁用")]):t("span",{staticStyle:{color:"green"}},[e._v("正常")])]}}])}),t("el-table-column",{attrs:{label:"是否注销",width:"130px","min-width":"20%",prop:"isDeleted"},scopedSlots:e._u([{key:"default",fn:function({row:{lockedFlag:a,isDeleted:r}}){return[t("span",1===+a?{staticStyle:{color:"red"}}:{staticStyle:{color:"green"}},[e._v(e._s(e.formatterDeleted(r)))])]}}])}),t("el-table-column",{attrs:{label:"注册时间",width:"170px","min-width":"20%",prop:"createTime"}})],1)],1)},l=[],o={name:"member-manager",data(){return{visible:!1,isBaned:!1,tableRowData:{userId:null,nickName:"",loginName:"",lockedFlag:0,isDeleted:0,createTime:"",introduceSign:"",passwordMd5:""},selections:[]}},methods:{async queryTableData(e,t){let a=[],r=0;try{let{resultCode:l,data:o}=await this.$api.users.queryUsersList(e,t);console.log("data_in_MemberManager.vue:",o),200===+l&&(r=+o.totalCount,a=o.list)}catch(l){console.log(l)}return{list:a,totalCount:r}},formatterDeleted(e){return 1===+e?"注销":"正常"},triggerUnban(){this.handleMultiSelectoins(0)},triggerBan(){this.handleMultiSelectoins(1)},async triggerHandle(e,t){try{let{resultCode:a}=await this.$api.users.handleUsers(e,t);if(200!==+a)return void this.$message.error("失败");this.$message.success("成功"),this.$refs.tableIns.refresh()}catch(a){console.log("triggerHandle error",a)}},handleMultiSelectoins(e){let t=this.selections;0!==t.length?(console.log("triggerHandle==>",t,e),this.triggerHandle(t,e)):this.$message.warning("请至少选择一项")},selectionChange(e){this.selections=e.map((e=>e.userId)),console.log(this.selections)}}},s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"498da39b",null),c=n.exports},6371:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"order-manager"},[t("div",{staticClass:"handler-box"},[t("el-input",{attrs:{placeholder:"请输入订单号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchOrderNo.apply(null,arguments)}},model:{value:e.orderNo,callback:function(t){e.orderNo=t},expression:"orderNo"}}),t("el-select",{on:{change:e.changeType},model:{value:e.orderStatus,callback:function(t){e.orderStatus=t},expression:"orderStatus"}},[t("el-option",{attrs:{value:"",label:"全部"}}),e._l(e.orderStatusOptions,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}))],2),t("el-button",{attrs:{round:!0,type:"primary",icon:"el-icon-s-home",size:"small"},on:{click:e.triggerCheckDone}},[e._v(" 配货完成 ")]),t("el-button",{attrs:{round:!0,type:"primary",icon:"el-icon-s-home",size:"small"},on:{click:e.triggerCheckOut}},[e._v(" 出库 ")]),t("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"small",round:!0},on:{click:e.triggerClose},slot:"reference"},[e._v(" 关闭订单 ")])],1),t("table-again-two",{ref:"tableIns",attrs:{query:e.queryTableData,pageSize:10,selectionChange:e.selectionChange}},[t("el-table-column",{attrs:{label:"订单号","min-width":"50%",prop:"orderNo"}}),t("el-table-column",{attrs:{label:"订单总价","min-width":"50%",prop:"totalPrice"}}),t("el-table-column",{attrs:{label:"订单状态",width:"100px",prop:"orderStatus",formatter:e.formatterOrderStatus}}),t("el-table-column",{attrs:{label:"支付方式",width:"100px","min-width":"20%",prop:"payType",formatter:e.formatterPayMethod}}),t("el-table-column",{attrs:{label:"创建时间",width:"200px","min-width":"20%",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作",width:"160px","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-popconfirm",{attrs:{title:"确定要关闭此订单吗？"},on:{confirm:function(t){return e.triggerHandle(a.orderId,"close")}}},[t("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("关闭订单")])],1),t("el-link",{attrs:{type:"success"},on:{click:function(t){return e.toOrderDetail(a.orderId)}}},[e._v("订单详情")])]}}])})],1)],1)},l=[],o=(a(7658),{name:"order-manager",data(){return{visible:!1,orderNo:"",lastOrderNo:"",orderStatus:"",lastOrderStatus:"",orderStatusOptions:[{value:"0",label:"待支付"},{value:"1",label:"已支付"},{value:"2",label:"配货完成"},{value:"3",label:"出库成功"},{value:"4",label:"交易成功"},{value:"-1",label:"手动关闭"},{value:"-2",label:"超时关闭"},{value:"-3",label:"商家关闭"}],selections:[]}},methods:{async queryTableData(e,t,a,r){r=this.orderStatus,a=this.orderNo;let l=[],o=0;try{let{resultCode:s,data:i}=await this.$api.orders.queryOrdersList(e,t,a,r);200===+s&&(o=+i.totalCount,l=i.list)}catch(s){console.log(s)}return{list:l,totalCount:o}},triggerClose(){this.handleMultiSelectoins("close")},triggerCheckDone(){this.handleMultiSelectoins("checkDone")},triggerCheckOut(){this.handleMultiSelectoins("checkOut")},async triggerHandle(e,t){try{let{resultCode:a,message:r}=await this.$api.orders.handleOrders(e,t);if(200!==+a)return void this.$message.error(r);this.$message.success("操作成功"),this.$refs.tableIns.refresh()}catch(a){}},handleMultiSelectoins(e){let t=this.selections;0!==t.length?this.triggerHandle(t,e):this.$message.warning("请至少选择一项")},selectionChange(e){this.selections=e.map((e=>e.orderId)),console.log(this.selections)},toOrderDetail(e){this.$router.push({path:"/modulemanage/orderdetail",query:{id:e}})},changeType(e){this.$refs.tableIns.init()},searchOrderNo(){this.orderNo==this.lastOrderNo&&this.orderStatus==this.lastOrderStatus||(this.$refs.tableIns.init(),this.lastOrderNo=this.orderNo,this.lastOrderStatus=this.orderStatus)},formatterPayMethod({payType:e}){let t=[{value:"0",label:"未支付"},{value:"1",label:"微信支付"},{value:"2",label:"支付宝支付"}],a=t.find((t=>t.value==e));return a.label||"其他支付方式"},formatterOrderStatus({orderStatus:e}){let t=[{value:"0",label:"待支付"},{value:"1",label:"已支付"},{value:"2",label:"配货完成"},{value:"3",label:"出库成功"},{value:"4",label:"交易成功"},{value:"-1",label:"手动关闭"},{value:"-2",label:"超时关闭"},{value:"-3",label:"商家关闭"}],a=t.find((t=>t.value==e));return a.label}}}),s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"7c85ac98",null),c=n.exports},2635:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rdoer-detail"},[t("el-card",{staticClass:"main-card"},[t("div",{staticClass:"top-data"},e._l(e.topCards,(function(a){return t("el-card",{attrs:{shadow:"always"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v(e._s(a.label))])]),e._v(" "+e._s(a.value)+" ")])})),1),t("el-table",{attrs:{border:!0,data:e.tableData}},[t("el-table-column",{attrs:{label:"商品图片","min-width":"25%",prop:"goodsCoverImg",width:"200px"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.formatUrl(a.goodsCoverImg),alt:"商品主图"}})]}}])}),t("el-table-column",{attrs:{label:"商品编号","min-width":"25%",prop:"goodsId"}}),t("el-table-column",{attrs:{label:"商品名","min-width":"25%",prop:"goodsName"}}),t("el-table-column",{attrs:{label:"商品数量","min-width":"25%",prop:"goodsCount"}}),t("el-table-column",{attrs:{label:"价格","min-width":"20%",prop:"sellingPrice"}})],1)],1)],1)},l=[],o={name:"order-detail",data(){return{detailInfo:null,tableData:null,orderStatusMap:[{value:"0",label:"待支付"},{value:"1",label:"已支付"},{value:"2",label:"配货完成"},{value:"3",label:"出库成功"},{value:"4",label:"交易成功"},{value:"-1",label:"手动关闭"},{value:"-2",label:"超时关闭"},{value:"-3",label:"商家关闭"}],topCards:[{value:null,label:"订单状态"},{value:null,label:"创建时间"},{value:null,label:"订单号"}]}},methods:{async queryDetailInfo(){try{let e=this.$route.query.id,{resultCode:t,data:a}=await this.$api.orders.queryOrdersInfo(e);if(console.log("resultCode",t,"data",a),200===+t)return this.detailInfo=a,void this.initData();this.$message.error("获取详情失败")}catch(e){console.log("error_in_OrderDetail.vue:",e)}},initData(){this.tableData=this.detailInfo.newBeeMallOrderItemVOS;let e=this.orderStatusMap.filter((e=>e.value==this.detailInfo.orderStatus))[0].label,t=this.detailInfo.createTime,a=this.detailInfo.orderNo;this.topCards=[{value:e,label:"订单状态"},{value:t,label:"创建时间"},{value:a,label:"订单号"}],console.log(this.topCards)},formatUrl(e){let t=/^http/,a=t.test(e);return a?e:`http://backend-api-02.newbee.ltd/${e}`}},created(){this.queryDetailInfo()}},s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"119c5946",null),c=n.exports},2105:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"type-manager",class:{"is-empty":e.$route.path.includes("level")}},[e.$route.path.includes("level")?t("router-view"):[t("div",{staticClass:"handler-box"},[t("el-button",{attrs:{round:!0,type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.triggerAdd}},[e._v(" 增加 ")]),t("el-popconfirm",{attrs:{title:"确定要删除这些选中的数据吗？"},on:{confirm:e.deleteMultiSelectoins}},[t("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"small",round:!0},slot:"reference"},[e._v(" 批量删除 ")])],1)],1),t("table-again",{ref:"tableIns",attrs:{query:e.queryTableData,pageSize:10,selectionChange:e.selectionChange}},[t("el-table-column",{attrs:{label:"分类名称","min-width":"33%",prop:"categoryName"}}),t("el-table-column",{attrs:{label:"排序值",width:"80px",prop:"categoryRank"}}),t("el-table-column",{attrs:{label:"添加时间",width:"200px","min-width":"20%",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作",width:"165px","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-link",{attrs:{type:"success"},on:{click:function(t){return e.triggerUpdate(a)}}},[e._v("修改")]),t("el-link",{attrs:{type:"info"},on:{click:function(t){return e.underCategories(a)}}},[e._v("下级分类")]),t("el-popconfirm",{attrs:{title:"确定要删除本条数据吗？"},on:{confirm:function(t){return e.triggerDelete(a.categoryId)}}},[t("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-dialog",{attrs:{width:"400px",title:(e.formData.categoryId?"修改":"添加")+"分类",visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),t("button-again",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])]},proxy:!0}])},[t("el-form",{ref:"formIns",attrs:{"label-width":"100px",model:e.formData,rules:e.formRules}},[t("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[t("el-input",{model:{value:e.formData.categoryName,callback:function(t){e.$set(e.formData,"categoryName","string"===typeof t?t.trim():t)},expression:"formData.categoryName"}})],1),t("el-form-item",{attrs:{label:"排序值",prop:"categoryRank"}},[t("el-input-number",{attrs:{min:1},model:{value:e.formData.categoryRank,callback:function(t){e.$set(e.formData,"categoryRank",t)},expression:"formData.categoryRank"}})],1)],1)],1)]],2)},l=[],o=(a(7658),{name:"type-manager",data(){const e=(e,t,a)=>{if(t>200||t<1)return a(new Error("排序值的范围：1~200之间"));a()};return{visible:!1,categoryLevel:1,parentId:0,formData:{categoryId:null,categoryName:"",categoryRank:1,parentId:0,categoryLevel:1},formRules:{categoryName:[{required:!0,trigger:"blur",message:"商品名称不能为空"}],categoryRank:[{required:!0,trigger:"blur",message:"排序值不能为空"},{validator:e,trigger:"blur"}]},selections:[]}},methods:{async queryTableData(e,t,a,r){a=this.categoryLevel,r=this.parentId;let l=[],o=0;try{let{resultCode:s,data:i}=await this.$api.categories.queryCategoriesList(e,t,a,r);200===+s&&(o=+i.totalCount,l=i.list)}catch(s){console.log(s)}return{list:l,totalCount:o}},async submit(){console.log("submit");try{await this.$refs.formIns.validate();let e=this.formData.categoryId,t=this.$api.categories.insertCategories;e&&(console.log("修改"),t=this.$api.categories.updateCategories);let{resultCode:a}=await t(this.formData);200!==+a?this.$message.error((this.formData.categoryId?"修改":"新增")+"失败，请稍后再试~"):(this.$message.success((this.formData.categoryId?"修改":"新增")+"成功"),this.closeDialog(),this.$refs.tableIns.refresh())}catch(e){console.log("submit-error-in-TypeManage=>",e)}},triggerAdd(){this.visible=!0,this.formData.categoryId=null},triggerUpdate(e){console.log("row_in_TypeManage.vue:",e);let{categoryName:t,categoryRank:a,categoryId:r,parentId:l,categoryLevel:o}=e;this.visible=!0,this.$nextTick((()=>{this.formData={categoryId:r,categoryName:t,categoryRank:a,parentId:l,categoryLevel:o}}))},async triggerDelete(e){try{let{resultCode:t}=await this.$api.categories.deleteCategories(e);if(200!==+t)return void this.$message.error("删除失败，请稍后重试");this.$message.success("删除成功"),this.$refs.tableIns.refresh()}catch(t){console.log("triggerDelete error",t)}},closeDialog(){this.visible=!1,this.$refs.formIns.resetFields()},deleteMultiSelectoins(){let e=this.selections;console.log("selections in deleteMultiSelectoins",e),0!==e.length?this.triggerDelete(e):this.$message.warning("请至少选择一项")},selectionChange(e){this.selections=e.map((e=>e.categoryId)),console.log(this.selections)},underCategories(e){let{categoryLevel:t,categoryId:a}=e,r=+t+1,l=a;this.$router.push({path:"/modulemanage/typemanage/level2",query:{level:r,parent_id:l}})}}}),s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"b0b89fe2",null),c=n.exports},966:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"under-level3"},[[t("div",{staticClass:"handler-box"},[t("el-button",{attrs:{round:!0,type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.triggerAdd}},[e._v(" 增加 ")]),t("el-popconfirm",{attrs:{title:"确定要删除这些选中的数据吗？"},on:{confirm:e.deleteMultiSelectoins}},[t("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"small",round:!0},slot:"reference"},[e._v(" 批量删除 ")])],1)],1),t("table-again",{ref:"tableIns",attrs:{query:e.queryTableData,pageSize:10,selectionChange:e.selectionChange}},[t("el-table-column",{attrs:{label:"分类名称","min-width":"33%",prop:"categoryName"}}),t("el-table-column",{attrs:{label:"排序值",width:"80px",prop:"categoryRank"}}),t("el-table-column",{attrs:{label:"添加时间",width:"200px","min-width":"20%",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作",width:"165px","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-link",{attrs:{type:"success"},on:{click:function(t){return e.triggerUpdate(a)}}},[e._v("修改")]),t("el-link",{attrs:{type:"info"},on:{click:function(t){return e.underCategories()}}},[e._v("下级分类")]),t("el-popconfirm",{attrs:{title:"确定要删除本条数据吗？"},on:{confirm:function(t){return e.triggerDelete(a.categoryId)}}},[t("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-dialog",{attrs:{width:"400px",title:(e.formData.categoryId?"修改":"添加")+"分类",visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),t("button-again",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])]},proxy:!0}])},[t("el-form",{ref:"formIns",attrs:{"label-width":"100px",model:e.formData,rules:e.formRules}},[t("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[t("el-input",{model:{value:e.formData.categoryName,callback:function(t){e.$set(e.formData,"categoryName","string"===typeof t?t.trim():t)},expression:"formData.categoryName"}})],1),t("el-form-item",{attrs:{label:"排序值",prop:"categoryRank"}},[t("el-input-number",{attrs:{min:1},model:{value:e.formData.categoryRank,callback:function(t){e.$set(e.formData,"categoryRank",t)},expression:"formData.categoryRank"}})],1)],1)],1)]],2)},l=[],o={name:"under-level3",data(){const e=(e,t,a)=>{if(t>200||t<1)return a(new Error("排序值的范围：1~200之间"));a()};return{visible:!1,categoryLevel:3,parentId:0,formData:{categoryId:null,categoryName:"",categoryRank:1,parentId:0,categoryLevel:1},formRules:{categoryName:[{required:!0,trigger:"blur",message:"商品名称不能为空"}],categoryRank:[{required:!0,trigger:"blur",message:"排序值不能为空"},{validator:e,trigger:"blur"}]},selections:[]}},methods:{async queryTableData(e,t,a,r){a=this.categoryLevel,r=+this.$route.query["parent_id"];let l=[],o=0;try{let{resultCode:s,data:i}=await this.$api.categories.queryCategoriesList(e,t,a,r);200===+s&&(o=+i.totalCount,l=i.list)}catch(s){console.log(s)}return{list:l,totalCount:o}},async submit(){console.log("submit");try{await this.$refs.formIns.validate();let e=this.formData.categoryId,t=this.$api.categories.insertCategories;e&&(console.log("修改"),t=this.$api.categories.updateCategories);let{resultCode:a}=await t(this.formData);200!==+a?this.$message.error((this.formData.categoryId?"修改":"新增")+"失败，请稍后再试~"):(this.$message.success((this.formData.categoryId?"修改":"新增")+"成功"),this.closeDialog(),this.$refs.tableIns.refresh())}catch(e){console.log("submit-error-in-Levle2=>",e)}},triggerAdd(){this.visible=!0,this.formData.categoryId=null},triggerUpdate(e){console.log("row_in_TypeManage.vue:",e);let{categoryName:t,categoryRank:a,categoryId:r,parentId:l,categoryLevel:o}=e;this.visible=!0,this.$nextTick((()=>{this.formData={categoryId:r,categoryName:t,categoryRank:a,parentId:l,categoryLevel:o}}))},triggerDelete(e){try{let{resultCode:t}=this.$api.categories.deleteCategories(e);if(200!==+t)return void this.$message.error("删除失败，请稍后重试");this.$message.success("删除成功"),this.$refs.tableIns.refresh()}catch(t){console.log("triggerDelete error",t)}},closeDialog(){this.visible=!1,this.$refs.formIns.resetFields()},deleteMultiSelectoins(){let e=this.selections;console.log("selections in deleteMultiSelectoins",e),0!==e.length?this.triggerDelete(e):this.$message.warning("请至少选择一项")},selectionChange(e){this.selections=e.map((e=>e.categoryId)),console.log(this.selections)},underCategories(){this.$message.warning("已无更下级分类")}}},s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"30bfad02",null),c=n.exports},8558:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"under-level2"},[[t("div",{staticClass:"handler-box"},[t("el-button",{attrs:{round:!0,type:"primary",icon:"el-icon-plus",size:"small"},on:{click:e.triggerAdd}},[e._v(" 增加 ")]),t("el-popconfirm",{attrs:{title:"确定要删除这些选中的数据吗？"},on:{confirm:e.deleteMultiSelectoins}},[t("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",size:"small",round:!0},slot:"reference"},[e._v(" 批量删除 ")])],1)],1),t("table-again",{ref:"tableIns",attrs:{query:e.queryTableData,pageSize:10,selectionChange:e.selectionChange}},[t("el-table-column",{attrs:{label:"分类名称","min-width":"33%",prop:"categoryName"}}),t("el-table-column",{attrs:{label:"排序值",width:"80px",prop:"categoryRank"}}),t("el-table-column",{attrs:{label:"添加时间",width:"200px","min-width":"20%",prop:"createTime"}}),t("el-table-column",{attrs:{label:"操作",width:"165px","min-width":"20%"},scopedSlots:e._u([{key:"default",fn:function({row:a}){return[t("el-link",{attrs:{type:"success"},on:{click:function(t){return e.triggerUpdate(a)}}},[e._v("修改")]),t("el-link",{attrs:{type:"info"},on:{click:function(t){return e.underCategories(a)}}},[e._v("下级分类")]),t("el-popconfirm",{attrs:{title:"确定要删除本条数据吗？"},on:{confirm:function(t){return e.triggerDelete(a.categoryId)}}},[t("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),t("el-dialog",{attrs:{width:"400px",title:(e.formData.categoryId?"修改":"添加")+"分类",visible:e.visible,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.closeDialog},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),t("button-again",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])]},proxy:!0}])},[t("el-form",{ref:"formIns",attrs:{"label-width":"100px",model:e.formData,rules:e.formRules}},[t("el-form-item",{attrs:{label:"分类名称",prop:"categoryName"}},[t("el-input",{model:{value:e.formData.categoryName,callback:function(t){e.$set(e.formData,"categoryName","string"===typeof t?t.trim():t)},expression:"formData.categoryName"}})],1),t("el-form-item",{attrs:{label:"排序值",prop:"categoryRank"}},[t("el-input-number",{attrs:{min:1},model:{value:e.formData.categoryRank,callback:function(t){e.$set(e.formData,"categoryRank",t)},expression:"formData.categoryRank"}})],1)],1)],1)]],2)},l=[],o=(a(7658),{name:"under-level2",data(){const e=(e,t,a)=>{if(t>200||t<1)return a(new Error("排序值的范围：1~200之间"));a()};return{visible:!1,categoryLevel:2,parentId:0,formData:{categoryId:null,categoryName:"",categoryRank:1,parentId:0,categoryLevel:1},formRules:{categoryName:[{required:!0,trigger:"blur",message:"商品名称不能为空"}],categoryRank:[{required:!0,trigger:"blur",message:"排序值不能为空"},{validator:e,trigger:"blur"}]},selections:[]}},methods:{async queryTableData(e,t,a,r){a=this.categoryLevel,r=+this.$route.query["parent_id"];let l=[],o=0;try{let{resultCode:s,data:i}=await this.$api.categories.queryCategoriesList(e,t,a,r);200===+s&&(o=+i.totalCount,l=i.list)}catch(s){console.log(s)}return{list:l,totalCount:o}},async submit(){console.log("submit");try{await this.$refs.formIns.validate();let e=this.formData.categoryId,t=this.$api.categories.insertCategories;e&&(console.log("修改"),t=this.$api.categories.updateCategories);let{resultCode:a}=await t(this.formData);200!==+a?this.$message.error((this.formData.categoryId?"修改":"新增")+"失败，请稍后再试~"):(this.$message.success((this.formData.categoryId?"修改":"新增")+"成功"),this.closeDialog(),this.$refs.tableIns.refresh())}catch(e){console.log("submit-error-in-Levle2=>",e)}},triggerAdd(){this.visible=!0,this.formData.categoryId=null},triggerUpdate(e){console.log("row_in_TypeManage.vue:",e);let{categoryName:t,categoryRank:a,categoryId:r,parentId:l,categoryLevel:o}=e;this.visible=!0,this.$nextTick((()=>{this.formData={categoryId:r,categoryName:t,categoryRank:a,parentId:l,categoryLevel:o}}))},triggerDelete(e){try{let{resultCode:t}=this.$api.categories.deleteCategories(e);if(200!==+t)return void this.$message.error("删除失败，请稍后重试");this.$message.success("删除成功"),this.$refs.tableIns.refresh()}catch(t){console.log("triggerDelete error",t)}},closeDialog(){this.visible=!1,this.$refs.formIns.resetFields()},deleteMultiSelectoins(){let e=this.selections;console.log("selections in deleteMultiSelectoins",e),0!==e.length?this.triggerDelete(e):this.$message.warning("请至少选择一项")},selectionChange(e){this.selections=e.map((e=>e.categoryId)),console.log(this.selections)},underCategories(e){let{categoryLevel:t,categoryId:a}=e,r=+t+1,l=a;this.$router.push({path:"/modulemanage/typemanage/level3",query:{level:r,parent_id:l}})}}}),s=o,i=a(1001),n=(0,i.Z)(s,r,l,!1,null,"4cb83a93",null),c=n.exports}}]);